{"ast":null,"code":"import _JSON$stringify from \"@babel/runtime-corejs2/core-js/json/stringify\";\nimport _defineProperty from \"@babel/runtime-corejs2/helpers/esm/defineProperty\";\nvar __jsx = React.createElement;\nimport React, { Component } from 'react';\nimport Router from 'next/router';\nimport { CardElement, injectStripe } from 'react-stripe-elements';\nimport { store } from 'react-notifications-component';\n\nclass CheckoutForm extends Component {\n  constructor(props) {\n    super(props);\n\n    _defineProperty(this, \"submit\", async ev => {\n      let {\n        token\n      } = await this.props.stripe.createToken({});\n      let response = await fetch(`/payments/${this.props.userId}`, {\n        method: \"POST\",\n        headers: {\n          \"Content-Type\": \"application/json\"\n        },\n        body: _JSON$stringify({\n          token: token.id,\n          email: this.props.userEmail\n        })\n      });\n\n      if (response.ok) {\n        store.addNotification({\n          message: 'Your card was saved, thank you!',\n          type: 'success',\n          container: 'top-center',\n          animationIn: [\"animated\", \"fadeIn\"],\n          animationOut: [\"animated\", \"fadeOut\"],\n          dismiss: {\n            duration: 4500\n          },\n          width: 300\n        });\n        this.props.done();\n      }\n    });\n\n    this.submit = this.submit.bind(this);\n  }\n\n  render() {\n    return __jsx(\"div\", {\n      className: \"checkout\"\n    }, __jsx(CardElement, {\n      hidePostalCode: true,\n      style: {\n        base: {\n          fontSize: '18px'\n        }\n      }\n    }), __jsx(\"button\", {\n      onClick: this.submit,\n      className: \"uk-button uk-button-primary\",\n      style: {\n        marginTop: '0.7rem',\n        marginLeft: '0.3rem',\n        borderRadius: '0.1875rem'\n      }\n    }, \"Add card\"), __jsx(\"button\", {\n      onClick: this.props.cancelAddCard,\n      className: \"uk-button uk-button-danger\",\n      style: {\n        marginTop: '0.7rem',\n        marginLeft: '0.3rem',\n        borderRadius: '0.1875rem'\n      }\n    }, \"Cancel\"));\n  }\n\n}\n\nexport default injectStripe(CheckoutForm);","map":{"version":3,"sources":["/Users/hugojohnsson/Desktop/banner-app/components/payment/AddCardForm.jsx"],"names":["React","Component","Router","CardElement","injectStripe","store","CheckoutForm","constructor","props","ev","token","stripe","createToken","response","fetch","userId","method","headers","body","id","email","userEmail","ok","addNotification","message","type","container","animationIn","animationOut","dismiss","duration","width","done","submit","bind","render","base","fontSize","marginTop","marginLeft","borderRadius","cancelAddCard"],"mappings":";;;AAAA,OAAOA,KAAP,IAAeC,SAAf,QAA+B,OAA/B;AACA,OAAOC,MAAP,MAAmB,aAAnB;AACA,SAAQC,WAAR,EAAqBC,YAArB,QAAwC,uBAAxC;AACA,SAASC,KAAT,QAAsB,+BAAtB;;AAEA,MAAMC,YAAN,SAA2BL,SAA3B,CAAqC;AACnCM,EAAAA,WAAW,CAACC,KAAD,EAAQ;AACjB,UAAMA,KAAN;;AADiB,oCAKV,MAAOC,EAAP,IAAc;AACrB,UAAI;AAAEC,QAAAA;AAAF,UAAY,MAAM,KAAKF,KAAL,CAAWG,MAAX,CAAkBC,WAAlB,CAA8B,EAA9B,CAAtB;AACA,UAAIC,QAAQ,GAAG,MAAMC,KAAK,CAAE,aAAY,KAAKN,KAAL,CAAWO,MAAO,EAAhC,EAAmC;AAC3DC,QAAAA,MAAM,EAAE,MADmD;AAE3DC,QAAAA,OAAO,EAAE;AAAC,0BAAgB;AAAjB,SAFkD;AAG3DC,QAAAA,IAAI,EAAE,gBAAe;AACnBR,UAAAA,KAAK,EAAEA,KAAK,CAACS,EADM;AAEnBC,UAAAA,KAAK,EAAE,KAAKZ,KAAL,CAAWa;AAFC,SAAf;AAHqD,OAAnC,CAA1B;;AASA,UAAIR,QAAQ,CAACS,EAAb,EAAiB;AACfjB,QAAAA,KAAK,CAACkB,eAAN,CAAsB;AAClBC,UAAAA,OAAO,EAAE,iCADS;AAElBC,UAAAA,IAAI,EAAE,SAFY;AAGlBC,UAAAA,SAAS,EAAE,YAHO;AAIlBC,UAAAA,WAAW,EAAE,CAAC,UAAD,EAAa,QAAb,CAJK;AAKlBC,UAAAA,YAAY,EAAE,CAAC,UAAD,EAAa,SAAb,CALI;AAMlBC,UAAAA,OAAO,EAAE;AACPC,YAAAA,QAAQ,EAAE;AADH,WANS;AASlBC,UAAAA,KAAK,EAAE;AATW,SAAtB;AAYA,aAAKvB,KAAL,CAAWwB,IAAX;AACD;AACF,KA/BkB;;AAEjB,SAAKC,MAAL,GAAc,KAAKA,MAAL,CAAYC,IAAZ,CAAiB,IAAjB,CAAd;AACD;;AA8BDC,EAAAA,MAAM,GAAG;AACP,WACE;AAAK,MAAA,SAAS,EAAC;AAAf,OACE,MAAC,WAAD;AAAa,MAAA,cAAc,EAAE,IAA7B;AAAmC,MAAA,KAAK,EAAE;AAACC,QAAAA,IAAI,EAAE;AAACC,UAAAA,QAAQ,EAAE;AAAX;AAAP;AAA1C,MADF,EAEE;AAAQ,MAAA,OAAO,EAAE,KAAKJ,MAAtB;AAA8B,MAAA,SAAS,EAAC,6BAAxC;AAAsE,MAAA,KAAK,EAAE;AAACK,QAAAA,SAAS,EAAC,QAAX;AAAqBC,QAAAA,UAAU,EAAE,QAAjC;AAA2CC,QAAAA,YAAY,EAAC;AAAxD;AAA7E,kBAFF,EAKE;AAAQ,MAAA,OAAO,EAAE,KAAKhC,KAAL,CAAWiC,aAA5B;AAA2C,MAAA,SAAS,EAAC,4BAArD;AAAkF,MAAA,KAAK,EAAE;AAACH,QAAAA,SAAS,EAAC,QAAX;AAAqBC,QAAAA,UAAU,EAAE,QAAjC;AAA2CC,QAAAA,YAAY,EAAC;AAAxD;AAAzF,gBALF,CADF;AAWD;;AA9CkC;;AAiDrC,eAAepC,YAAY,CAACE,YAAD,CAA3B","sourcesContent":["import React, {Component} from 'react';\nimport Router from 'next/router';\nimport {CardElement, injectStripe} from 'react-stripe-elements';\nimport { store } from 'react-notifications-component';\n\nclass CheckoutForm extends Component {\n  constructor(props) {\n    super(props);\n    this.submit = this.submit.bind(this);\n  }\n\n  submit = async (ev) => {\n    let { token } = await this.props.stripe.createToken({});\n    let response = await fetch(`/payments/${this.props.userId}`, {\n      method: \"POST\",\n      headers: {\"Content-Type\": \"application/json\"},\n      body: JSON.stringify({\n        token: token.id,\n        email: this.props.userEmail\n      })\n    });\n\n    if (response.ok) {\n      store.addNotification({\n          message: 'Your card was saved, thank you!',\n          type: 'success',\n          container: 'top-center',\n          animationIn: [\"animated\", \"fadeIn\"],\n          animationOut: [\"animated\", \"fadeOut\"],\n          dismiss: {\n            duration: 4500,\n          },\n          width: 300\n      });\n\n      this.props.done();\n    }\n  }\n\n  render() {\n    return (\n      <div className=\"checkout\">\n        <CardElement hidePostalCode={true} style={{base: {fontSize: '18px'}}}/>\n        <button onClick={this.submit} className=\"uk-button uk-button-primary\" style={{marginTop:'0.7rem', marginLeft: '0.3rem', borderRadius:'0.1875rem'}}>\n          Add card\n        </button>\n        <button onClick={this.props.cancelAddCard} className=\"uk-button uk-button-danger\" style={{marginTop:'0.7rem', marginLeft: '0.3rem', borderRadius:'0.1875rem'}}>\n          Cancel\n        </button>\n      </div>\n    );\n  }\n}\n\nexport default injectStripe(CheckoutForm);\n"]},"metadata":{},"sourceType":"module"}
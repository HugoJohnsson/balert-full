{"ast":null,"code":"import _JSON$stringify from \"@babel/runtime-corejs2/core-js/json/stringify\";\nimport React from \"react\";\nvar __jsx = React.createElement;\nimport { useState, useEffect } from 'react';\nimport Layout from '../components/Layout';\nimport Link from 'next/link';\nimport Navbar from '../components/dashboard/Navbar';\nimport BannerCard from '../components/dashboard/BannerCard';\nimport fetch from 'isomorphic-unfetch';\nimport { store } from 'react-notifications-component';\nimport { withAuthSync, getToken, auth } from '../utils/auth';\nimport { getUserId } from '../utils/user';\n\nconst Settings = ({\n  user\n}) => {\n  const {\n    0: domain,\n    1: setDomain\n  } = useState(user.domain);\n\n  const handleDomainChange = async e => {\n    e.preventDefault();\n    const token = getToken();\n    const res = await fetch(`http://localhost:3600/users/${user.id}`, {\n      method: \"PATCH\",\n      headers: {\n        'Content-Type': 'application/json',\n        'Authorization': 'Bearer ' + token\n      },\n      body: _JSON$stringify({\n        domain: domain\n      })\n    });\n    const data = await res.json();\n\n    if (!data.error) {\n      alert('saved!');\n    } else {\n      alert('Something unexpected happened');\n    }\n  };\n\n  return __jsx(Layout, {\n    title: \"Settings\"\n  }, __jsx(Navbar, null), __jsx(\"section\", {\n    className: \"uk-section uk-section-muted\",\n    style: {\n      height: '95vh'\n    }\n  }, __jsx(\"div\", {\n    className: \"uk-container\"\n  }, __jsx(\"h2\", {\n    className: \"uk-text-bold\"\n  }, \"Settings\"), __jsx(\"form\", {\n    onSubmit: handleDomainChange\n  }, __jsx(\"div\", {\n    className: \"uk-margin\"\n  }, __jsx(\"div\", {\n    className: \"uk-inline uk-width-1-1\"\n  }, __jsx(\"span\", null, \"Domain:\"), __jsx(\"input\", {\n    value: domain,\n    onChange: e => setDomain(e.target.value),\n    className: \"uk-input\",\n    type: \"text\",\n    placeholder: \"Email address\",\n    style: {\n      borderRadius: '0.1875rem'\n    }\n  })), __jsx(\"button\", {\n    type: \"submit\",\n    className: \"uk-button uk-button-primary uk-button-small\",\n    style: {\n      borderRadius: '0.1875rem',\n      marginTop: '0.5rem',\n      textTransform: 'none'\n    }\n  }, \"Update\"))))));\n};\n\nSettings.getInitialProps = async ctx => {\n  const token = auth(ctx);\n  const userId = getUserId(token);\n  const res = await fetch(`http://localhost:3600/users/${userId}`, {\n    method: \"GET\",\n    headers: {\n      'Authorization': 'Bearer ' + token\n    }\n  });\n  const user = await res.json();\n  return {\n    user\n  };\n};\n\nexport default withAuthSync(Settings);","map":{"version":3,"sources":["/Users/hugojohnsson/Desktop/banner-app/pages/settings.jsx"],"names":["useState","useEffect","Layout","Link","Navbar","BannerCard","fetch","store","withAuthSync","getToken","auth","getUserId","Settings","user","domain","setDomain","handleDomainChange","e","preventDefault","token","res","id","method","headers","body","data","json","error","alert","height","target","value","borderRadius","marginTop","textTransform","getInitialProps","ctx","userId"],"mappings":"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","sourcesContent":["import { useState, useEffect } from 'react';\nimport Layout from '../components/Layout'\nimport Link from 'next/link';\nimport Navbar from '../components/dashboard/Navbar';\nimport BannerCard from '../components/dashboard/BannerCard';\nimport fetch from 'isomorphic-unfetch'\nimport { store } from 'react-notifications-component';\n\nimport { withAuthSync, getToken, auth } from '../utils/auth';\nimport { getUserId } from '../utils/user';\n\nconst Settings = ({ user }) => {\n  const [domain, setDomain] = useState(user.domain);\n\n  const handleDomainChange = async (e) => {\n    e.preventDefault();\n    const token = getToken();\n    const res = await fetch(`http://localhost:3600/users/${user.id}`, {\n      method: \"PATCH\",\n      headers: {\n        'Content-Type': 'application/json',\n        'Authorization': 'Bearer ' + token\n      },\n      body: JSON.stringify({\n        domain: domain\n      })\n    });\n\n    const data = await res.json();\n    if (!data.error) {\n      alert('saved!')\n    } else {\n      alert('Something unexpected happened')\n    }\n  }\n\n  return (\n    <Layout title=\"Settings\">\n      <Navbar/>\n  \t\t<section className=\"uk-section uk-section-muted\" style={{height:'95vh'}}>\n        <div className=\"uk-container\">\n  \t\t\t\t<h2 className=\"uk-text-bold\">Settings</h2>\n            <form onSubmit={handleDomainChange}>\n              <div className=\"uk-margin\">\n                <div className=\"uk-inline uk-width-1-1\">\n                  <span>Domain:</span>\n                  <input value={domain} onChange={e => setDomain(e.target.value)} className=\"uk-input\" type=\"text\" placeholder=\"Email address\" style={{borderRadius:'0.1875rem'}}/>\n                </div>\n                <button type=\"submit\" className=\"uk-button uk-button-primary uk-button-small\" style={{borderRadius:'0.1875rem', marginTop:'0.5rem', textTransform:'none'}}>Update</button>\n              </div>\n            </form>\n  \t\t\t</div>\n  \t\t</section>\n    </Layout>\n  )\n}\n\nSettings.getInitialProps = async (ctx) => {\n  const token = auth(ctx);\n  const userId = getUserId(token);\n  const res = await fetch(`http://localhost:3600/users/${userId}`, {\n    method: \"GET\",\n    headers: {\n      'Authorization': 'Bearer ' + token\n    }\n  });\n  const user = await res.json();\n\n  return { user }\n}\n\nexport default withAuthSync(Settings);\n"]},"metadata":{},"sourceType":"module"}